<Ui>
	<Frame name="MenuBar" parent="UIParent" clampedToScreen="true">
		<Size>
			<AbsDimension y="16"/>
		</Size>
		<Anchors>
			<Anchor point="TOPLEFT"/>
            <Anchor point="TOPRIGHT"/>
		</Anchors>
        <Scripts>
            <OnLoad>
                this.activeDropDown = nil;
                this.normalBgColor = Color(0.75, 0.75, 0.75);
                
                this:RegisterEvent("ADDON_LOADED");
                AddOns.Editor:RegisterBackgroundColorFunction(this, function (self, color)
                    local newColor = self.normalBgColor*color;
                    self:SetBackdropColor(newColor:Unpack());
                end);
            </OnLoad>
            <OnEvent>
                if (event == "ADDON_LOADED") then
                    local newColor = this.normalBgColor*AddOns.Editor.Config.UIBackgroundColor;
                    this:SetBackdrop({["insets"]={["bottom"] = -3}});
                    this:SetBackdropColor(newColor:Unpack());
                end
            </OnEvent>
        </Scripts>
        <Frames>
            <Frame name="$parentHorizontalBorderLeft">
                <Size>
                    <AbsDimension y="3"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT"/>
                    <Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT"/>
                </Anchors>
                <Backdrop>
                    <BackgroundColor r="1" g="1" b="1"/>
                </Backdrop>
            </Frame>
            <Frame name="$parentHorizontalBorderRight">
                <Size>
                    <AbsDimension y="3"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT"/>
                    <Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT"/>
                </Anchors>
                <Backdrop>
                    <BackgroundColor r="1" g="1" b="1"/>
                </Backdrop>
            </Frame>
            <Frame name="$parentVerticalBorderLeft">
                <Size>
                    <AbsDimension x="3"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT" relativePoint="TOPLEFT"/>
                    <Anchor point="BOTTOMLEFT" relativePoint="BOTTOMLEFT"/>
                </Anchors>
                <Backdrop>
                    <BackgroundColor r="1" g="1" b="1"/>
                </Backdrop>
            </Frame>
            <Frame name="$parentVerticalBorderRight">
                <Size>
                    <AbsDimension x="3"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPRIGHT" relativePoint="TOPRIGHT"/>
                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT"/>
                </Anchors>
                <Backdrop>
                    <BackgroundColor r="1" g="1" b="1"/>
                </Backdrop>
            </Frame>
            <Button name="$parentCloseButton" inherits="ButtonTemplate_Menu" text="X">
                <Size>
                    <AbsDimension x="16" y="16"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPRIGHT">
                        <Offset>
                            <AbsDimension x="-3" y="1"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        if (AddOns.Editor:IsDataSaved()) then
                            Exit();
                        else
                            EscMenuConfirmDialog:Show();
                        end
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>
	</Frame>
</Ui>
